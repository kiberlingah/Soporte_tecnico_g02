<link
  href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@500&family=Poppins:wght@500&display=swap"
  rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">


<!-- Imagen de fondo -->
<img src="assets/fondo_lore.jpg" alt="Fondo login" class="imagen-fondo">


<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center">
  <div class="row register-wrapper rounded-4 overflow-hidden shadow-lg" style="max-width: 950px; width: 100%;">

    <!-- Columna izquierda: formulario -->
    <div class="col-md-6 bg-white p-5 d-flex flex-column justify-content-center">
      <form #formRegisterClient="ngForm" (ngSubmit)="registrar(formRegisterClient)" novalidate>

        <!-- Botón cerrar -->
        <div class="text-end mb-3">
          <button type="button" class="btn btn-cerrar" (click)="volverAlInicio()" aria-label="Cerrar">
            X
          </button>
        </div>

        <!-- Ícono y título -->
        <div class="text-center mb-4">
          <i class="bi bi-person-circle mb-3" style="font-size: 4rem; color:#2d00f5;"></i>
                    <h2 class="fw-bold" style="font-family:'Orbitron', sans-serif; color:#1100ff;">
            Registrar cuenta
          </h2>
        </div>

        <!-- Nombres y Apellidos -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="nombres" class="form-label fw-semibold text-info">Nombres</label>
            <input type="text" id="nombres" name="nombres" [(ngModel)]="nombres" class="form-control campo-input"
              placeholder="Ingresa tus nombres" required #nombresCtrl="ngModel" />
            <div
              *ngIf="(nombresCtrl.invalid && nombresCtrl.touched) || (formRegisterClient.submitted && nombresCtrl.invalid)"
              class="text-danger small">Este campo es obligatorio.
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="apellidos" class="form-label fw-semibold text-info">Apellidos</label>
            <input type="text" id="apellidos" name="apellidos" [(ngModel)]="apellidos" class="form-control campo-input"
              placeholder="Ingresa tus apellidos" required #apellidosCtrl="ngModel" />
            <div
              *ngIf="(apellidosCtrl.invalid && apellidosCtrl.touched) || (formRegisterClient.submitted && apellidosCtrl.invalid)"
              class="text-danger small">Este campo es
              obligatorio.</div>
          </div>
        </div>

        <!-- Teléfono y Correo -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="telefono" class="form-label fw-semibold text-info">Teléfono</label>
            <input type="tel" id="telefono" name="telefono" [(ngModel)]="telefono" class="form-control campo-input"
              placeholder="Ej. 987654321" pattern="[0-9]{9}" required #telefonoCtrl="ngModel" />
            <div
              *ngIf="(telefonoCtrl.invalid && telefonoCtrl.touched)|| (formRegisterClient.submitted && telefonoCtrl.invalid)"
              class="text-danger small">Debe contener 9 dígitos.
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="correo" class="form-label fw-semibold text-info">Correo electrónico</label>
            <input type="email" id="correo" name="correo" [(ngModel)]="correo" class="form-control campo-input"
              placeholder="Ej. ejemplo@correo.com" required email #correoCtrl="ngModel" />
            <div
              *ngIf="(correoCtrl.invalid && correoCtrl.touched) || (formRegisterClient.submitted && correoCtrl.invalid)"
              class="text-danger small">Ingresa un correo válido.
            </div>
          </div>
        </div>

        <!-- Contraseña (sola en una fila) -->
        <div class="mb-3">
          <label for="contrasena" class="form-label fw-semibold text-info">Contraseña</label>

          <input type="password" id="contrasena" name="contrasena" [(ngModel)]="contrasena"
            class="form-control campo-input" placeholder="Crea una contraseña segura" required minlength="8"
            #passCtrl="ngModel" />
          <div class="text-danger small" *ngIf="passCtrl.touched || formRegisterClient.submitted">

            <!-- Campo obligatorio -->
            <div *ngIf="passCtrl.errors?.['required']">
              ⚠️ Este campo es obligatorio, asegurate que contenga 8 caracteres, una mayúscula, una minúscula, un número y un símbolo.
            </div>

            <!-- Reglas -->
            <div *ngIf="!passCtrl.errors?.['required']">

              <div *ngIf="!longitudValida()">Mínimo 8 caracteres</div>
              <div *ngIf="!tieneMayuscula()">Al menos una letra mayúscula</div>
              <div *ngIf="!tieneMinuscula()">Al menos una letra minúscula</div>
              <div *ngIf="!tieneNumero()">Al menos un número</div>
              <div *ngIf="!tieneSimbolo()">Al menos un símbolo (@$!%*?&)</div>

            </div>
          </div>

        </div>
        <!-- Botón -->
        <button type="submit" class="btn btn-login w-100 mt-3">Registrar Cuenta</button>

        <div *ngIf="mensajeExito" class="alert alert-success alert-dismissible fade show mt-3" role="alert">
          {{ mensajeExito }}
          <button type="button" class="btn-close" aria-label="Close" (click)="mensajeExito=''"></button>
        </div>
      </form>
      <!-- Enlace a login -->
      <div class="text-center mt-3">
        <a class="link-secundario" (click)="redirigirLogin()">¿Ya tienes cuenta? Inicia sesión</a>
      </div>
    </div>

    <!-- Columna derecha: imagen institucional -->
    <div class="col-md-6 d-none d-md-flex align-items-center justify-content-center bg-gradient rounded-end-4"
          style="background-color:#d7ebff;">
          <img src="assets/register_re.png" alt="Visual institucional" 
        class="img-fluid" style="max-width: 120%; height: auto;"> 
  </div>
</div>