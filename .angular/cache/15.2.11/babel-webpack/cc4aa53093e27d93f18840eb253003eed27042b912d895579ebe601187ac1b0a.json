{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ServiciosComponent = class ServiciosComponent {\n  constructor(modalidadService, distritoService, horarioService, servicioService, tarifaService) {\n    this.modalidadService = modalidadService;\n    this.distritoService = distritoService;\n    this.horarioService = horarioService;\n    this.servicioService = servicioService;\n    this.tarifaService = tarifaService;\n    this.programasInstalacion = [];\n    this.programasReparacion = [];\n    this.modalidades = [];\n    this.distritos = [];\n    this.horarios = [];\n    this.tarifasDistritos = [];\n    this.servicio = {\n      programa: '',\n      modalidad: '',\n      distrito: '',\n      direccion: '',\n      fecha: '',\n      hora: '',\n      nombres: '',\n      apellidos: '',\n      dni: '',\n      comentario: '',\n      precio: 0\n    };\n  }\n  ngOnInit() {\n    // Cargar modalidades\n    this.modalidadService.getModalidades().subscribe({\n      next: d => this.modalidades = d,\n      error: err => console.error('Error al cargar modalidades:', err)\n    });\n    // Cargar distritos\n    this.distritoService.listar().subscribe({\n      next: d => this.distritos = d,\n      error: err => console.error('Error al cargar distritos:', err)\n    });\n    // Cargar horarios\n    this.horarioService.listar().subscribe({\n      next: d => this.horarios = d,\n      error: err => console.error('Error al cargar horarios:', err)\n    });\n    // Cargar tarifas por distrito\n    this.tarifaService.listar().subscribe({\n      next: d => this.tarifasDistritos = d,\n      error: err => console.error('Error al cargar tarifas:', err)\n    });\n    this.servicioService.getServiciosInstalacion().subscribe({\n      next: d => this.programasInstalacion = d,\n      error: err => console.error('Error al cargar instalación:', err)\n    });\n    // Cargar programas de reparación\n    this.servicioService.getServiciosReparacion().subscribe({\n      next: d => this.programasReparacion = d,\n      error: err => console.error('Error al cargar reparación:', err)\n    });\n  }\n  actualizarPrecio() {\n    // Precio base del servicio\n    const servicio = [...this.programasInstalacion, ...this.programasReparacion].find(s => s.id_servicio === this.servicio.programa);\n    // Tarifa adicional por distrito\n    const tarifa = this.tarifasDistritos.find(t => t.id_distrito === this.servicio.distrito);\n    const precioServicio = servicio ? servicio.precio : 0;\n    const precioDistrito = tarifa ? tarifa.precio : 0;\n    this.servicio.precio = precioServicio + precioDistrito;\n  }\n  registrarServicio() {\n    if (!this.formularioValido()) {\n      alert('⚠️ Completa todos los campos obligatorios antes de registrar el servicio.');\n      return;\n    }\n    this.servicioService.registrarServicio(this.servicio).subscribe({\n      next: () => alert('✅ Servicio registrado correctamente'),\n      error: err => console.error('Error al registrar servicio:', err)\n    });\n  }\n  formularioValido() {\n    return this.servicio.programa && this.servicio.distrito && this.servicio.precio > 0;\n  }\n};\nServiciosComponent = __decorate([Component({\n  selector: 'app-servicios',\n  templateUrl: './servicios.component.html',\n  styleUrls: ['./servicios.component.scss']\n})], ServiciosComponent);\nexport { ServiciosComponent };","map":{"version":3,"mappings":"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","names":["Component","ServiciosComponent","constructor","modalidadService","distritoService","horarioService","servicioService","tarifaService","programa","modalidad","distrito","direccion","fecha","hora","nombres","apellidos","dni","comentario","precio","ngOnInit","getModalidades","subscribe","next","d","modalidades","error","err","console","listar","distritos","horarios","tarifasDistritos","getServiciosInstalacion","programasInstalacion","getServiciosReparacion","programasReparacion","actualizarPrecio","servicio","find","s","id_servicio","tarifa","t","id_distrito","precioServicio","precioDistrito","registrarServicio","formularioValido","alert","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["G:\\FrontendReyshell\\proyecto-web-soporte\\src\\app\\client-portal\\servicios\\servicios.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ModalidadService } from 'src/app/services/modalidad.service';\r\nimport { DistritoService } from 'src/app/services/distrito.service';\r\nimport { HorarioService } from 'src/app/services/horario.service';\r\nimport { ServicioService } from 'src/app/services/servicio.service';\r\nimport { TarifaService } from 'src/app/services/tarifa.service';\r\n\r\n@Component({\r\n  selector: 'app-servicios',\r\n  templateUrl: './servicios.component.html',\r\n  styleUrls: ['./servicios.component.scss']\r\n})\r\nexport class ServiciosComponent implements OnInit {\r\n  programasInstalacion: any[] = [];\r\n  programasReparacion: any[] = [];\r\n  modalidades: any[] = [];\r\n  distritos: any[] = [];\r\n  horarios: any[] = [];\r\n  tarifasDistritos: any[] = [];\r\n\r\n  servicio: any = {\r\n    programa: '',\r\n    modalidad: '',\r\n    distrito: '',\r\n    direccion: '',\r\n    fecha: '',\r\n    hora: '',\r\n    nombres: '',\r\n    apellidos: '',\r\n    dni: '',\r\n    comentario: '',\r\n    precio: 0\r\n  };\r\n\r\n  constructor(\r\n    private modalidadService: ModalidadService,\r\n    private distritoService: DistritoService,\r\n    private horarioService: HorarioService,\r\n    private servicioService: ServicioService,\r\n    private tarifaService: TarifaService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Cargar modalidades\r\n    this.modalidadService.getModalidades().subscribe({\r\n      next: (d: any[]) => this.modalidades = d,\r\n      error: (err: any) => console.error('Error al cargar modalidades:', err)\r\n    });\r\n\r\n    // Cargar distritos\r\n    this.distritoService.listar().subscribe({\r\n      next: (d: any[]) => this.distritos = d,\r\n      error: (err: any) => console.error('Error al cargar distritos:', err)\r\n    });\r\n\r\n    // Cargar horarios\r\n    this.horarioService.listar().subscribe({\r\n      next: (d: any[]) => this.horarios = d,\r\n      error: (err: any) => console.error('Error al cargar horarios:', err)\r\n    });\r\n\r\n    // Cargar tarifas por distrito\r\n    this.tarifaService.listar().subscribe({\r\n      next: (d: any[]) => this.tarifasDistritos = d,\r\n      error: (err: any) => console.error('Error al cargar tarifas:', err)\r\n    });\r\n\r\n   this.servicioService.getServiciosInstalacion().subscribe({\r\n  next: (d: any[]) => this.programasInstalacion = d,\r\n  error: (err: any) => console.error('Error al cargar instalación:', err)\r\n});\r\n\r\n\r\n    // Cargar programas de reparación\r\n    this.servicioService.getServiciosReparacion().subscribe({\r\n      next: (d: any[]) => this.programasReparacion = d,\r\n      error: (err: any) => console.error('Error al cargar reparación:', err)\r\n    });\r\n  }\r\n\r\n  actualizarPrecio(): void {\r\n    // Precio base del servicio\r\n    const servicio = [...this.programasInstalacion, ...this.programasReparacion]\r\n      .find(s => s.id_servicio === this.servicio.programa);\r\n\r\n    // Tarifa adicional por distrito\r\n    const tarifa = this.tarifasDistritos.find(t => t.id_distrito === this.servicio.distrito);\r\n\r\n    const precioServicio = servicio ? servicio.precio : 0;\r\n    const precioDistrito = tarifa ? tarifa.precio : 0;\r\n\r\n    this.servicio.precio = precioServicio + precioDistrito;\r\n  }\r\n\r\n  registrarServicio(): void {\r\n    if (!this.formularioValido()) {\r\n      alert('⚠️ Completa todos los campos obligatorios antes de registrar el servicio.');\r\n      return;\r\n    }\r\n\r\n    this.servicioService.registrarServicio(this.servicio).subscribe({\r\n      next: () => alert('✅ Servicio registrado correctamente'),\r\n      error: (err: any) => console.error('Error al registrar servicio:', err)\r\n    });\r\n  }\r\n\r\n  formularioValido(): boolean {\r\n    return this.servicio.programa && this.servicio.distrito && this.servicio.precio > 0;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}