{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class AuthService {\n  constructor(router) {\n    this.router = router;\n    this.role = null;\n    this.cliente = null;\n  }\n  // Simulación de login\n  loginMock(rol) {\n    this.role = rol;\n    localStorage.setItem('rol', rol);\n    localStorage.setItem('token', 'fake-token-123'); // token simulado\n    this.redirectHomeByRole(); // redirige según rol\n  }\n  // Obtener rol actual\n  getRole() {\n    return this.role || localStorage.getItem('rol');\n  }\n  // Obtener cliente actual\n  getIdCliente() {\n    return this.cliente?.id_cliente || localStorage.getItem('idCliente');\n  }\n  // Verificar si está logueado\n  isLoggedIn() {\n    return !!this.getRole();\n  }\n  // Obtener token\n  getToken() {\n    return localStorage.getItem('token');\n  }\n  // Redirección según rol (siempre devuelve string)\n  redirectHomeByRole() {\n    const rol = this.getRole();\n    if (rol === 'cliente') {\n      this.router.navigate(['/inicio']);\n      return '/inicio';\n    }\n    if (rol === 'admin') {\n      this.router.navigate(['/admin']);\n      return '/admin';\n    }\n    if (rol === 'tecnico') {\n      this.router.navigate(['/tecnico']);\n      return '/tecnico';\n    }\n    this.router.navigate(['/login']);\n    return '/login';\n  }\n  // Cerrar sesión\n  logout() {\n    this.role = null;\n    localStorage.clear();\n    this.router.navigate(['/login']);\n  }\n  static {\n    this.ɵfac = function AuthService_Factory(t) {\n      return new (t || AuthService)(i0.ɵɵinject(i1.Router));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AuthService,\n      factory: AuthService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"mappings":";;AAKA,OAAM,MAAOA,WAAW;EAItBC,YAAoBC,MAAc;IAAd,WAAM,GAANA,MAAM;IAHlB,SAAI,GAAkB,IAAI;IAC1B,YAAO,GAAmB,IAAI;EAED;EAErC;EACAC,SAAS,CAACC,GAAoC;IAC5C,IAAI,CAACC,IAAI,GAAGD,GAAG;IACfE,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEH,GAAG,CAAC;IAChCE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAEjD,IAAI,CAACC,kBAAkB,EAAE,CAAC,CAAC;EAC7B;EAEA;EACAC,OAAO;IACL,OAAO,IAAI,CAACJ,IAAI,IAAIC,YAAY,CAACI,OAAO,CAAC,KAAK,CAAC;EACjD;EAEA;EACAC,YAAY;IACV,OAAO,IAAI,CAACC,OAAO,EAAEC,UAAU,IAAIP,YAAY,CAACI,OAAO,CAAC,WAAW,CAAC;EACtE;EAEA;EACAI,UAAU;IACR,OAAO,CAAC,CAAC,IAAI,CAACL,OAAO,EAAE;EACzB;EAEA;EACAM,QAAQ;IACN,OAAOT,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC;EACtC;EAEA;EACAF,kBAAkB;IAChB,MAAMJ,GAAG,GAAG,IAAI,CAACK,OAAO,EAAE;IAC1B,IAAIL,GAAG,KAAK,SAAS,EAAE;MACrB,IAAI,CAACF,MAAM,CAACc,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;MACjC,OAAO,SAAS;;IAElB,IAAIZ,GAAG,KAAK,OAAO,EAAE;MACnB,IAAI,CAACF,MAAM,CAACc,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;MAChC,OAAO,QAAQ;;IAEjB,IAAIZ,GAAG,KAAK,SAAS,EAAE;MACrB,IAAI,CAACF,MAAM,CAACc,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;MAClC,OAAO,UAAU;;IAEnB,IAAI,CAACd,MAAM,CAACc,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAChC,OAAO,QAAQ;EACjB;EAEA;EACAC,MAAM;IACJ,IAAI,CAACZ,IAAI,GAAG,IAAI;IAChBC,YAAY,CAACY,KAAK,EAAE;IACpB,IAAI,CAAChB,MAAM,CAACc,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;;;uBA3DWhB,WAAW;IAAA;EAAA;;;aAAXA,WAAW;MAAAmB,SAAXnB,WAAW;MAAAoB,YADE;IAAM;EAAA","names":["AuthService","constructor","router","loginMock","rol","role","localStorage","setItem","redirectHomeByRole","getRole","getItem","getIdCliente","cliente","id_cliente","isLoggedIn","getToken","navigate","logout","clear","factory","providedIn"],"sourceRoot":"","sources":["G:\\FrontendReyshell\\proyecto-web-soporte\\src\\app\\auth\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Cliente } from '../client-portal/models/cliente';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthService {\r\n  private role: string | null = null;\r\n  private cliente: Cliente | null = null;\r\n\r\n  constructor(private router: Router) {}\r\n\r\n  // Simulación de login\r\n  loginMock(rol: 'cliente' | 'admin' | 'tecnico') {\r\n    this.role = rol;\r\n    localStorage.setItem('rol', rol);\r\n    localStorage.setItem('token', 'fake-token-123'); // token simulado\r\n\r\n    this.redirectHomeByRole(); // redirige según rol\r\n  }\r\n\r\n  // Obtener rol actual\r\n  getRole(): string | null {\r\n    return this.role || localStorage.getItem('rol');\r\n  }\r\n\r\n  // Obtener cliente actual\r\n  getIdCliente(): string | null {\r\n    return this.cliente?.id_cliente || localStorage.getItem('idCliente');\r\n  }\r\n\r\n  // Verificar si está logueado\r\n  isLoggedIn(): boolean {\r\n    return !!this.getRole();\r\n  }\r\n\r\n  // Obtener token\r\n  getToken(): string | null {\r\n    return localStorage.getItem('token');\r\n  }\r\n\r\n  // Redirección según rol (siempre devuelve string)\r\n  redirectHomeByRole(): string {\r\n    const rol = this.getRole();\r\n    if (rol === 'cliente') {\r\n      this.router.navigate(['/inicio']);\r\n      return '/inicio';\r\n    }\r\n    if (rol === 'admin') {\r\n      this.router.navigate(['/admin']);\r\n      return '/admin';\r\n    }\r\n    if (rol === 'tecnico') {\r\n      this.router.navigate(['/tecnico']);\r\n      return '/tecnico';\r\n    }\r\n    this.router.navigate(['/login']);\r\n    return '/login';\r\n  }\r\n\r\n  // Cerrar sesión\r\n  logout() {\r\n    this.role = null;\r\n    localStorage.clear();\r\n    this.router.navigate(['/login']);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}