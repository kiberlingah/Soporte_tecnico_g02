{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginComponent = class LoginComponent {\n  constructor(clienteService, router) {\n    this.clienteService = clienteService;\n    this.router = router;\n    // Campos enlazados con ngModel\n    this.correo = '';\n    this.contrasena = '';\n    // Mensajes de feedback\n    this.mensajeExito = '';\n    this.mensajeError = '';\n  }\n  // iniciarSesion(formValue: any): void {\n  //   const credentials = {\n  //     correo: this.correo,\n  //     password: this.contrasena // ⚠️ el backend espera \"password\"\n  //   };\n  //   this.clienteService.loginCliente(credentials).subscribe({\n  //     next: (res: any) => {\n  //       if (res.token) {\n  //         localStorage.setItem('token', res.token);\n  //         this.mensajeExito = '✅ Login exitoso';\n  //         this.mensajeError = '';\n  //         // Redirige al perfil o dashboard\n  //         this.router.navigate(['/cliente/dashboard']);\n  //       }\n  //     },\n  //     error: (err: any) => {\n  //       console.error('Error en login:', err);\n  //       this.mensajeError = '❌ Credenciales inválidas';\n  //       this.mensajeExito = '';\n  //     }\n  //   });\n  // }\n  iniciarSesion(correo, contrasena) {\n    this.clienteService.loginCliente({\n      correo,\n      contrasena\n    }).subscribe({\n      next: resp => {\n        if (resp.success) {\n          // Guardar token\n          localStorage.setItem('token', resp.token);\n          // Guardar el id_cliente real\n          localStorage.setItem('id_cliente', resp.id_cliente);\n          this.mensajeExito = '✅ Login exitoso';\n          this.mensajeError = '';\n          this.router.navigate(['/cliente/dashboard']);\n        }\n      },\n      error: err => {\n        console.error(\"Error login:\", err);\n        this.mensajeError = '❌ Credenciales inválidas';\n        this.mensajeExito = '';\n      }\n    });\n  }\n  volverAlInicio() {\n    this.router.navigate(['/']); // redirige al inicio\n  }\n\n  redirigirRegistro() {\n    this.router.navigate(['/register']); // redirige al registro\n  }\n};\n\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AASlC,IAAMC,cAAc,GAApB,MAAMA,cAAc;EASzBC,YAAoBC,cAA8B,EAAUC,MAAc;IAAtD,mBAAc,GAAdD,cAAc;IAA0B,WAAM,GAANC,MAAM;IARlE;IACA,WAAM,GAAW,EAAE;IACnB,eAAU,GAAW,EAAE;IAEvB;IACA,iBAAY,GAAW,EAAE;IACzB,iBAAY,GAAW,EAAE;EAEoD;EAE7E;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAGAC,aAAa,CAACC,MAAc,EAAEC,UAAkB;IAChD,IAAI,CAACJ,cAAc,CAACK,YAAY,CAAC;MAAEF,MAAM;MAAEC;IAAU,CAAE,CAAC,CAACE,SAAS,CAAC;MACjEC,IAAI,EAAGC,IAAS,IAAI;QAClB,IAAIA,IAAI,CAACC,OAAO,EAAE;UAChB;UACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,IAAI,CAACI,KAAK,CAAC;UAEzC;UACAF,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEH,IAAI,CAACK,UAAU,CAAC;UACnD,IAAI,CAACC,YAAY,GAAG,iBAAiB;UACnC,IAAI,CAACC,YAAY,GAAG,EAAE;UACtB,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,oBAAoB,CAAC,CAAC;;MAElD,CAAC;MACDC,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,cAAc,EAAEC,GAAG,CAAC;QAClC,IAAI,CAACH,YAAY,GAAG,0BAA0B;QAC9C,IAAI,CAACD,YAAY,GAAG,EAAE;MACxB;KACD,CAAC;EACJ;EAEEM,cAAc;IACZ,IAAI,CAACnB,MAAM,CAACe,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC/B;;EAEAK,iBAAiB;IACf,IAAI,CAACpB,MAAM,CAACe,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;EACvC;CACD;;AAjEYlB,cAAc,eAL1BD,SAAS,CAAC;EACTyB,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,GACW1B,cAAc,CAiE1B;SAjEYA,cAAc","names":["Component","LoginComponent","constructor","clienteService","router","iniciarSesion","correo","contrasena","loginCliente","subscribe","next","resp","success","localStorage","setItem","token","id_cliente","mensajeExito","mensajeError","navigate","error","err","console","volverAlInicio","redirigirRegistro","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["G:\\FrontendReyshell\\proyecto-web-soporte\\src\\app\\auth\\login\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { ClienteService } from 'src/app/services/cliente.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent {\r\n  // Campos enlazados con ngModel\r\n  correo: string = '';\r\n  contrasena: string = '';\r\n\r\n  // Mensajes de feedback\r\n  mensajeExito: string = '';\r\n  mensajeError: string = '';\r\n\r\n  constructor(private clienteService: ClienteService, private router: Router) {}\r\n\r\n  // iniciarSesion(formValue: any): void {\r\n  //   const credentials = {\r\n  //     correo: this.correo,\r\n  //     password: this.contrasena // ⚠️ el backend espera \"password\"\r\n  //   };\r\n\r\n  //   this.clienteService.loginCliente(credentials).subscribe({\r\n  //     next: (res: any) => {\r\n  //       if (res.token) {\r\n  //         localStorage.setItem('token', res.token);\r\n  //         this.mensajeExito = '✅ Login exitoso';\r\n  //         this.mensajeError = '';\r\n  //         // Redirige al perfil o dashboard\r\n  //         this.router.navigate(['/cliente/dashboard']);\r\n  //       }\r\n  //     },\r\n  //     error: (err: any) => {\r\n  //       console.error('Error en login:', err);\r\n  //       this.mensajeError = '❌ Credenciales inválidas';\r\n  //       this.mensajeExito = '';\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n\r\n  iniciarSesion(correo: string, contrasena: string) {\r\n  this.clienteService.loginCliente({ correo, contrasena }).subscribe({\r\n    next: (resp: any) => {\r\n      if (resp.success) {\r\n        // Guardar token\r\n        localStorage.setItem('token', resp.token);\r\n        \r\n        // Guardar el id_cliente real\r\n        localStorage.setItem('id_cliente', resp.id_cliente);\r\n        this.mensajeExito = '✅ Login exitoso';\r\n          this.mensajeError = '';\r\n          this.router.navigate(['/cliente/dashboard']);\r\n      }\r\n    },\r\n    error: (err) => {\r\n      console.error(\"Error login:\", err);\r\n      this.mensajeError = '❌ Credenciales inválidas';\r\n      this.mensajeExito = '';\r\n    }\r\n  });\r\n}\r\n\r\n  volverAlInicio(): void {\r\n    this.router.navigate(['/']); // redirige al inicio\r\n  }\r\n\r\n  redirigirRegistro(): void {\r\n    this.router.navigate(['/register']); // redirige al registro\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}